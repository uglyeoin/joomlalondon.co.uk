(function(n){var t=function(n){this.initialise(n)};t.prototype=n.extend({},n.fn.arkbase(),{constructor:t,options:{css:{toggle:"#toggle-actions-upload",form:"#form-subactions-upload",field:"#field-subactions-upload",stack:"#stack-subactions-upload",path:"#path-subactions-upload",control:"#ctrl-subactions-upload"},html:{errors:{path:"No Upload Path!",field:"No File!"}},namespace:".upload"},active:!0,el:{root:null,toggle:null,form:null,field:null,stack:null,path:null,controls:null},initialise:function(t){if(this.set(t),this.el.root=n(this.options.css.root),this.el.toggle=this.el.root.find(this.options.css.toggle),this.el.form=this.el.root.find(this.options.css.form),this.el.field=this.el.form.find(this.options.css.field),this.el.stack=this.el.form.find(this.options.css.stack),this.el.path=this.el.form.find(this.options.css.path),this.el.controls=this.el.form.find(this.options.css.control),n.views){if(!this.el.form)return this.message('"Upload" Functionality Error'),this.debug("initialise","Upload Form Element Not Found"),!1}else return this.message("Dependent Classes Not Found"),this.debug("initialise","Dependent Classes Not Found"),!1;this.addFormEvents();this.requests()},addFormEvents:function(){n(document).trigger("upload:before:event",[this.el.form]);n(this.el.controls).on("click"+this.options.namespace,n.proxy(function(){this.submit()},this));n(document).trigger("upload:after:event",[this.el.form])},submit:function(){if(n(document).trigger("upload:before:submit",[this.el.form]),!this.active)return this.message(this.options.html.errors.permission,"error"),this.debug("submit","The Upload Logic is Currently Disabled."),!1;var t=n(document).triggerHandler("observer:request:active",{type:"stack"}),i=n(document).triggerHandler("observer:request:active",{type:"path",stack:t.value});i.path&&this.el.stack&&this.el.path?this.el.field.val()?(this.el.stack.val(t.value),this.el.path.val(i.path),n(this.el.form).submit()):(this.message(this.options.html.errors.field),this.debug("submit","The File Input is Empty")):(this.message(this.options.html.errors.path),this.debug("submit","The Observer Active Stack Path Could Not be Found"));n(document).trigger("upload:after:submit",[this.el.form])},requests:function(){n(document).on("upload:request:state",n.proxy(function(n,t){t.type==="on"?(this.active=!0,this.el.toggle.removeAttr("disabled"),this.el.field.removeProp("disabled"),this.el.controls.removeAttr("disabled")):(this.active=!1,this.el.toggle.attr("disabled","disabled"),this.el.field.prop("disabled","disabled"),this.el.controls.attr("disabled","disabled"))},this))}});n.fn.upload=function(n){return new t(n)}})(window.jQuery)